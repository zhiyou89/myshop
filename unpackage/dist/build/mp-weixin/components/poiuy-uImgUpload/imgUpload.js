(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/poiuy-uImgUpload/imgUpload"],{2388:function(t,r,e){"use strict";e.r(r);var n=e("f3df"),a=e.n(n);for(var o in n)"default"!==o&&function(t){e.d(r,t,(function(){return n[t]}))}(o);r["default"]=a.a},"42c5":function(t,r,e){"use strict";e.r(r);var n=e("bfb7"),a=e("2388");for(var o in a)"default"!==o&&function(t){e.d(r,t,(function(){return a[t]}))}(o);e("eb61");var i,u=e("f0c5"),l=Object(u["a"])(a["default"],n["b"],n["c"],!1,null,"36715390",null,!1,n["a"],i);r["default"]=l.exports},"808e":function(t,r,e){},bfb7:function(t,r,e){"use strict";var n;e.d(r,"b",(function(){return a})),e.d(r,"c",(function(){return o})),e.d(r,"a",(function(){return n}));var a=function(){var t=this,r=t.$createElement;t._self._c},o=[]},eb61:function(t,r,e){"use strict";var n=e("808e"),a=e.n(n);a.a},f3df:function(t,r,e){"use strict";(function(t){function e(t){return o(t)||a(t)||u(t)||n()}function n(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function o(t){if(Array.isArray(t))return l(t)}function i(t,r){var e;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(e=u(t))||r&&t&&"number"===typeof t.length){e&&(t=e);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){e=t[Symbol.iterator]()},n:function(){var t=e.next();return i=t.done,t},e:function(t){l=!0,o=t},f:function(){try{i||null==e.return||e.return()}finally{if(l)throw o}}}}function u(t,r){if(t){if("string"===typeof t)return l(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?l(t,r):void 0}}function l(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var c={name:"imgUpload",props:{imgArr:{type:[Array]},uploadImgCount:{type:String,default:"3"},imgCount:{type:String,default:"3"},imgSize:{type:Number,default:2},formData:{type:Object,default:function(){return{}}},imgType:{type:[Array],default:function(){return["jpeg","png","jpg"]}},closeTip:{type:Boolean,default:!1},loading:{type:Boolean,default:!0},url:{type:String},async:{type:Boolean,default:!1},header:{type:Array,default:function(){return[]}}},data:function(){return{imgArray:[],canUpCount:"",startUpload:!1,prompt:"",asyncArr:[],headers:{}}},created:function(){this.imgArray=this.imgArr||[],this.changeImgArr(!0),this.canUpCount=Number(this.uploadImgCount),this.url?this.prompt="":this.prompt="你没有传入上传url,请检查传入参数",this.changeHeader(this.header)},watch:{imgArr:function(t,r){this.imgArray=t||[],this.changeImgArr(!0)},imgCount:function(t,r){this.uploadImgCount=t,this.canUpCount=Number(this.uploadImgCount)},url:function(t,r){this.prompt=t?"":"你没有传入上传url,请检查传入参数"},header:function(t,r){this.changeHeader(t)}},methods:{upPhoto:function(){var r=this;r.url?(Number(r.imgCount-r.imgArray.length)<Number(r.uploadImgCount)&&(r.canUpCount=Number(r.imgCount-r.imgArray.length)),r.prompt="",t.showActionSheet({itemList:["拍照上传","从相册中选择"],success:function(n){0==n.tapIndex?t.chooseImage({count:Number(r.canUpCount),sizeType:["original","compressed"],sourceType:["camera"],success:function(n){if(n){if(n.tempFiles){var a,o=i(n.tempFiles);try{var u=function(){var e=a.value;if(e.size>1024*r.imgSize*1024)return t.showToast({title:"图片不能大于".concat(r.imgSize,"M"),icon:"none"}),{v:!1};if(e.type){var n=r.imgType.some((function(t){var r=e.type.split("/");if(r.length)return t===r[1]}));if(!n)return t.showToast({title:"只允许上传".concat(r.imgType,"的类型"),icon:"none"}),{v:!1}}};for(o.s();!(a=o.n()).done;){var l=u();if("object"===typeof l)return l.v}}catch(s){o.e(s)}finally{o.f()}}var c=r.imgArray.length;r.imgArray=[].concat(e(r.imgArray),e(n.tempFilePaths)),r.changeImgArr(!1),r.async&&r.asyncUpload(c)}}}):1==n.tapIndex&&t.chooseImage({count:Number(r.canUpCount),sizeType:["original","compressed"],sourceType:["album"],success:function(n){if(n){if(n.tempFiles){var a,o=i(n.tempFiles);try{var u=function(){var e=a.value;if(e.size>1024*r.imgSize*1024)return t.showToast({title:"图片不能大于".concat(r.imgSize,"M"),icon:"none"}),{v:!1};if(e.type){var n=r.imgType.some((function(t){var r=e.type.split("/");if(r.length)return t===r[1]}));if(!n)return t.showToast({title:"只允许上传".concat(r.imgType,"的类型"),icon:"none"}),{v:!1}}};for(o.s();!(a=o.n()).done;){var l=u();if("object"===typeof l)return l.v}}catch(s){o.e(s)}finally{o.f()}}var c=r.imgArray.length;r.imgArray=[].concat(e(r.imgArray),e(n.tempFilePaths)),r.changeImgArr(!1),r.async?r.asyncUpload(c):r.$emit("result",{code:500,msg:"同步模式下,我不会被调用哦~"})}}})},fail:function(t){console.log(t.errMsg)}})):r.prompt="你没有传入上传url,请检查！"},preview:function(r,e){t.previewImage({urls:[r]})},changeImgArr:function(t){for(var r in this.imgArray){var e=this.imgArray[r];e.upload||(!1===e.upload?this.imgArray[r].url=e.url:this.imgArray[r]={id:r,upload:t,url:e,result:null})}},asyncUpload:function(r){var e=this,n=this;if(this.imgArray.length){this.startUpload=!0,n.prompt="";for(var a=function(r){var a=e.imgArray[r];t.uploadFile({url:n.url,filePath:a.url,name:"file",header:n.headers,formData:n.formData,success:function(t){if(200==t.statusCode){var r=JSON.parse(t.data);a.result=!0,r.code=0,n.$emit("result",r)}else a.result=!1,n.$emit("result",t);a.upload=!0,n.startUpload=!1,n.$forceUpdate()},fail:function(t){a.result=!1,n.startUpload=!1,n.prompt="上传失败，请检查！",console.log(t),n.$forceUpdate()}})},o=r;o<this.imgArray.length;o++)a(o)}},delImg:function(r){var e=this;t.showModal({title:"提示",content:"是否删除这张照片？",success:function(t){t.confirm?(e.imgArray.splice(r,1),e.async&&e.$emit("delImg",r)):t.cancel}})},upload:function(t){var r=this,e=this;e.async?e.prompt="在异步模式下无法调用upload方法。":(e.prompt="",e.imgArray.length?function(){r.startUpload=!0;var n,a=0,o=[],u=i(e.imgArray);try{var l=function(){var r=n.value;e.uploadImg(r,(function(n){200==n.statusCode?(a++,o.push(n.data),r.result=!0):(o.push(n),r.result=!1),r.upload=!0,e.$forceUpdate(),e.prompt="正在上传...(成功"+a+"张/"+o.length+"张)",o.length==e.imgArray.length&&(e.prompt="已全部上传完成！",a>0?(e.startUpload=!1,t(e.result(o,a))):(e.startUpload=!1,t(o)))}))};for(u.s();!(n=u.n()).done;)l()}catch(c){u.e(c)}finally{u.f()}}():e.prompt="请先选择图片后上传！")},result:function(t,r){var e={result:"success",code:0,urlArray:t,success:r};return e},uploadImg:function(r,e){var n=this;t.uploadFile({url:n.url,filePath:r.url,formData:n.formData,header:n.headers,name:"file",success:function(t){t&&e(t)},fail:function(t){e({resCode:500,msg:"图片上传失败",localUrl:r,reason:t})}})},changeHeader:function(t){var r=this;if(Array.isArray(t)){var e,n=i(t);try{for(n.s();!(e=n.n()).done;){var a=e.value;for(var o in a)r.headers[o]=a[o]}}catch(u){n.e(u)}finally{n.f()}}else r.prompt="请使用数组格式的Header传参"}}};r.default=c}).call(this,e("543d")["default"])}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/poiuy-uImgUpload/imgUpload-create-component',
    {
        'components/poiuy-uImgUpload/imgUpload-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("42c5"))
        })
    },
    [['components/poiuy-uImgUpload/imgUpload-create-component']]
]);
