(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"0c4c":function(t,n,e){"use strict";e.r(n);var o=e("f6dc"),a=e.n(o);for(var i in o)"default"!==i&&function(t){e.d(n,t,(function(){return o[t]}))}(i);n["default"]=a.a},"3c32":function(t,n,e){},"53ae":function(t,n,e){"use strict";e.d(n,"b",(function(){return a})),e.d(n,"c",(function(){return i})),e.d(n,"a",(function(){return o}));var o={hotGoodsList:function(){return e.e("components/hot-goods-list/hot-goods-list").then(e.bind(null,"9410"))},contact:function(){return e.e("components/contact/contact").then(e.bind(null,"0792"))}},a=function(){var t=this,n=t.$createElement;t._self._c},i=[]},"5ad2":function(t,n,e){"use strict";e.r(n);var o=e("53ae"),a=e("0c4c");for(var i in a)"default"!==i&&function(t){e.d(n,t,(function(){return a[t]}))}(i);e("5ae0");var s,c=e("f0c5"),u=Object(c["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);n["default"]=u.exports},"5ae0":function(t,n,e){"use strict";var o=e("3c32"),a=e.n(o);a.a},7316:function(t,n,e){"use strict";(function(t){e("ffa8");o(e("66fd"));var n=o(e("5ad2"));function o(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,e("543d")["createPage"])},f6dc:function(t,n,e){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=a(e("a34a"));function a(t){return t&&t.__esModule?t:{default:t}}function i(t,n,e,o,a,i,s){try{var c=t[i](s),u=c.value}catch(r){return void e(r)}c.done?n(u):Promise.resolve(u).then(o,a)}function s(t){return function(){var n=this,e=arguments;return new Promise((function(o,a){var s=t.apply(n,e);function c(t){i(s,o,a,c,u,"next",t)}function u(t){i(s,o,a,c,u,"throw",t)}c(void 0)}))}}var c=function(){e.e("components/loading-view/product-loading").then(function(){return resolve(e("d98a"))}.bind(null,e)).catch(e.oe)},u=function(){e.e("components/search/search").then(function(){return resolve(e("0cec"))}.bind(null,e)).catch(e.oe)},r=function(){e.e("components/nav-top/nav-top").then(function(){return resolve(e("79b2"))}.bind(null,e)).catch(e.oe)},d=function(){e.e("components/swiper/swiper").then(function(){return resolve(e("83cf"))}.bind(null,e)).catch(e.oe)},h=function(){e.e("components/goods-list/goods-list").then(function(){return resolve(e("a775"))}.bind(null,e)).catch(e.oe)},l=function(){e.e("components/hot-rank/hot-rank").then(function(){return resolve(e("7ff6"))}.bind(null,e)).catch(e.oe)},g=function(){e.e("components/hot-goods-list/hot-goods-list").then(function(){return resolve(e("9410"))}.bind(null,e)).catch(e.oe)},f=function(){e.e("components/no-message-notice/no-message-notice").then(function(){return resolve(e("5b8d"))}.bind(null,e)).catch(e.oe)},p=function(){e.e("components/nav/goods_navbar").then(function(){return resolve(e("86d6"))}.bind(null,e)).catch(e.oe)},v=function(){Promise.all([e.e("common/vendor"),e.e("components/goods-list/product-by-category")]).then(function(){return resolve(e("8280"))}.bind(null,e)).catch(e.oe)},m=function(){e.e("components/loading-view/loading-view").then(function(){return resolve(e("c66a"))}.bind(null,e)).catch(e.oe)},y=function(){e.e("components/gwh-backTopIcon/gwh-backTopIcon").then(function(){return resolve(e("50d4"))}.bind(null,e)).catch(e.oe)},w=function(){e.e("components/contact/contact").then(function(){return resolve(e("0792"))}.bind(null,e)).catch(e.oe)},D={data:function(){return{pageNameColor:"#fff",productData:[],banners:[],productList:[],indexHot:[],navTop:0,height:0,navLeft:0,right:0,navIndex:1,dataProduct:[],address:"",clickFlash:!0,initLoading:!0,topFlash:!1,noMessage:!1,setting:{},navArr:[{id:1,url:"https://youguan-1257044613.cos.ap-guangzhou.myqcloud.com/nav-9.png",title:"新鲜水果"},{id:2,url:"https://youguan-1257044613.cos.ap-guangzhou.myqcloud.com/nav-1.png",title:"包点牛奶"},{id:3,url:"https://youguan-1257044613.cos.ap-guangzhou.myqcloud.com/nav-2.png",title:"海鲜水产"},{id:4,url:"https://youguan-1257044613.cos.ap-guangzhou.myqcloud.com/nav-3.png",title:"家庭洗护"},{id:5,url:"https://youguan-1257044613.cos.ap-guangzhou.myqcloud.com/nav-4.png",title:"酒水饮料"},{id:6,url:"https://youguan-1257044613.cos.ap-guangzhou.myqcloud.com/nav-5.png",title:"粮油调味"},{id:7,url:"https://youguan-1257044613.cos.ap-guangzhou.myqcloud.com/nav-6.png",title:"肉禽单品"},{id:8,url:"https://youguan-1257044613.cos.ap-guangzhou.myqcloud.com/nav-7.png",title:"速冻食品"},{id:9,url:"https://youguan-1257044613.cos.ap-guangzhou.myqcloud.com/nav-8.png",title:"新鲜蔬菜"},{id:10,url:"https://youguan-1257044613.cos.ap-guangzhou.myqcloud.com/nav-10.png",title:"休闲零食"}]}},components:{mSwiper:d,goodsList:h,hotRank:l,hotGoodsList:g,noMessageNtice:f,navTop:r,searchView:u,goodsNavbar:p,productByCategory:v,loadingView:m,loading:c,topIcon:y,contact:w},methods:{jump:function(n){t.setStorageSync("listID",n),t.switchTab({url:"/pages/list/list"})},goTop:function(){t.pageScrollTo({scrollTop:0,duration:100})},onPageScroll:function(t){t.scrollTop>700?this.topFlash=!0:this.topFlash=!1},distance:function(t,n,e,o){var a=t*Math.PI/180,i=e*Math.PI/180,s=a-i,c=n*Math.PI/180-o*Math.PI/180,u=2*Math.asin(Math.sqrt(Math.pow(Math.sin(s/2),2)+Math.cos(a)*Math.cos(i)*Math.pow(Math.sin(c/2),2)));return u*=6378.137,u=Math.round(1e4*u)/1e4,u},chooseLocation:function(){var n=this;t.chooseLocation({success:function(t){n.address=t.name}})},getLocation:function(){var n=this;if(this.address)return!1;t.getLocation({type:"wgs84",geocode:!0,success:function(e){var o=n.distance(e.latitude,e.longitude,n.setting.latitude,n.setting.longitude),a=t.getStorageSync("setting");if(a=a.delivery_distance,o>a)t.showModal({content:"当前地址超出配送范围,请您选择其他地址",success:function(n){n.confirm?t.navigateTo({url:"/pages/address/address"}):n.cancel&&console.log("用户点击取消")}});else{t.setStorageSync("iaddress",{latitude:e.latitude,longitude:e.longitude});var i=e.latitude+","+e.longitude;t.request({url:"https://apis.map.qq.com/ws/geocoder/v1/",data:{location:i,key:"XFLBZ-UGRWP-I2WDT-V6KWX-43QMJ-5WB4A"},success:function(t){n.address=t.data.result.address}})}}})},shopClickMoreTime:function(){if(this.clickFlash)return!1;this.clickFlash=!0},navBar:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.shopClickMoreTime(),this.navIndex=t,this.isHas()?this.showData():(this.intProductData(),this.noMessage=this.getFlash(),this.getProductByCategoryIndex())},intProductData:function(){this.isHas()||this.productData.push({page:1,navId:this.navIndex,flash:!1,data:[]})},insterData:function(t){for(var n=0;this.productData.length>n;n++)if(this.productData[n].navId==this.navIndex){!t instanceof Array&&(t=[t]);for(var e=0;t.length>e;e++)this.productData[n].data.push(t[e])}},isHas:function(){if(!this.productData.length)return!1;for(var t=0;this.productData.length>t;t++)if(this.productData[t].navId==this.navIndex)return!0},showData:function(){for(var t=0;this.productData.length>t;t++)this.productData[t].navId==this.navIndex&&(this.productList=this.productData[t].data);this.clickFlash=!1},getPages:function(){for(var t=0;this.productData.length>t;t++)if(this.productData[t].navId==this.navIndex)return this.productData[t].page},updatePages:function(t){for(var n=0;this.productData.length>n;n++)this.productData[n].navId==this.navIndex&&(this.productData[n].page=t)},getFlash:function(){for(var t=0;this.productData.length>t;t++)if(this.productData[t].navId==this.navIndex)return this.productData[t].flash},updateFlash:function(){for(var t=0;this.productData.length>t;t++)this.productData[t].navId==this.navIndex&&(this.productData[t].flash=!0)},getProductByCategoryIndex:function(){var t=arguments,n=this;return s(o.default.mark((function e(){var a,i,s;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.length>0&&void 0!==t[0]?t[0]:1,i=t.length>1?t[1]:void 0,e.next=4,n.$myrequest({url:"/category/product",data:{pages:a,id:n.navIndex}});case 4:s=e.sent,s.data.length<n.setting.page_limit&&(n.updateFlash(),n.noMessage=n.getFlash()),n.insterData(s.data),n.showData(),n.clickFlash=!1,i&&i();case 10:case"end":return e.stop()}}),e)})))()},getHot:function(){var t=this;return s(o.default.mark((function n(){var e;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$myrequest({url:"/product/hot"});case 2:e=n.sent,t.indexHot=e;case 4:case"end":return n.stop()}}),n)})))()},getBanner:function(){var t=this;return s(o.default.mark((function n(){var e;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$myrequest({url:"/banner/1"});case 2:e=n.sent,t.banners=e.items;case 4:case"end":return n.stop()}}),n)})))()},getSetting:function(){var n=this;return s(o.default.mark((function e(){var a;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.$myrequest({url:"/setting"});case 2:a=e.sent,n.setting=a,t.setStorageSync("setting",a);case 5:case"end":return e.stop()}}),e)})))()},intLoading:function(){var t=this;this.banners.length&&this.productList.length||setTimeout((function(){t.initLoading=!1}),1500)}},onShow:function(){this.intLoading(),this.getLocation()},onLoad:function(){this.getSetting(),this.intProductData(),this.getProductByCategoryIndex(),this.getBanner(),this.getHot();var n=t.getMenuButtonBoundingClientRect(),e=t.getSystemInfoSync(),o=e.windowWidth;this.navTop=n.top,this.right=n.right,this.navLeft=o-this.right,this.height=n.height},onReachBottom:function(){if(this.noMessage)return!1;var t=this.getPages();t++,this.updatePages(t),this.getProductByCategoryIndex(t)},onPullDownRefresh:function(){var n=this;this.productData=[],this.navIndex=1,this.productList=[],this.clickFlash=!1,this.topFlash=!1,this.noMessage=!1,setTimeout((function(){n.navBar(1),n.getProductByCategoryIndex(1,(function(){t.stopPullDownRefresh()}))}),1e3)}};n.default=D}).call(this,e("543d")["default"])}},[["7316","common/runtime","common/vendor"]]]);