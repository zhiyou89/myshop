(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/good/good"],{"4a53":function(t,e,n){"use strict";n.r(e);var r=n("c764"),u=n.n(r);for(var o in r)"default"!==o&&function(t){n.d(e,t,(function(){return r[t]}))}(o);e["default"]=u.a},"7a98":function(t,e,n){"use strict";(function(t){n("ffa8");r(n("66fd"));var e=r(n("db16"));function r(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},c764:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(n("a34a")),u=a(n("8b1f")),o=a(n("b055"));function a(t){return t&&t.__esModule?t:{default:t}}function i(t){return l(t)||s(t)||d(t)||c()}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(t,e){if(t){if("string"===typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(t,e):void 0}}function s(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function l(t){if(Array.isArray(t))return f(t)}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function h(t,e,n,r,u,o,a){try{var i=t[o](a),c=i.value}catch(d){return void n(d)}i.done?e(c):Promise.resolve(c).then(r,u)}function p(t){return function(){var e=this,n=arguments;return new Promise((function(r,u){var o=t.apply(e,n);function a(t){h(o,r,u,a,i,"next",t)}function i(t){h(o,r,u,a,i,"throw",t)}a(void 0)}))}}var g=function(){n.e("components/swiper/swiper").then(function(){return resolve(n("83cf"))}.bind(null,n)).catch(n.oe)},y=function(){n.e("components/goods-list/recomment-goods-list").then(function(){return resolve(n("0240"))}.bind(null,n)).catch(n.oe)},v=function(){n.e("components/goods-list/product-by-menu").then(function(){return resolve(n("9a7e"))}.bind(null,n)).catch(n.oe)},m=function(){n.e("components/uni-goods-nav/uni-goods-nav").then(function(){return resolve(n("87b1"))}.bind(null,n)).catch(n.oe)},M=function(){n.e("components/gwh-backTopIcon/gwh-backTopIcon").then(function(){return resolve(n("50d4"))}.bind(null,n)).catch(n.oe)},w={data:function(){return{share:{title:"ALAPI",path:"/pages/index/index",imageUrl:"",desc:"",content:""},topFlash:!1,fill:!0,options:[{icon:"home",text:"首页",infoBackgroundColor:"#007aff",infoColor:"red",info:0},{icon:"cart",text:"购物车",info:1}],buttonGroup:[{text:"加入购物车",backgroundColor:"#ff0000",color:"#fff"},{text:"立即购买",backgroundColor:"#ffa200",color:"#fff"}],id:0,productOne:[],page:1,productList:[],categoryID:0,menuTitle:[],productByCategory:[],menuID:0,showMenu:!1,productByMenu:[],reviewsData:[],cartCount:0,clickMenuID:0,indexMenu:0,allProductByMenuPrice:0,allProductByMenu:[]}},components:{mSwiper:g,recommentGoodsList:y,uniGoodsNav:m,productByMenu:v,topIcon:M},methods:{goTop:function(){t.pageScrollTo({scrollTop:0,duration:100})},onPageScroll:function(t){t.scrollTop>1300?this.topFlash=!0:this.topFlash=!1},addCartByFriend:function(e){for(var n=0;this.productList.length>n;n++)e.id==this.productList[n].id&&u.default.add(this.productList[n],1);u.default.updateCartCount(),this.cartCount=u.default.readCartCountByStorageSync(),t.showToast({title:"加入购物车成功"})},addCart:function(e){for(var n=0;this.productByMenu.length>n;n++)e.id==this.productByMenu[n].id&&u.default.add(this.productByMenu[n],1);u.default.updateCartCount(),this.cartCount=u.default.readCartCountByStorageSync(),t.showToast({title:"加入购物车成功"})},addProductByMenu:function(e){u.default.add(this.productOne,1),this.cartCount=u.default.readCartCountByStorageSync(),t.showToast({title:"添加购物车成功"})},sharePage:function(){this.id,this.categoryID;this.onShareAppMessage()},navigateTomenu:function(){t.navigateTo({url:"/pages/menu/menu-detail?id="+this.clickMenuID+"&category_id=5"})},addAll:function(){u.default.addAllToCart(this.productByMenu,1),this.cartCount=u.default.readCartCountByStorageSync(),t.showToast({title:"添加购物车成功"})},intDataForMenu:function(t){this.allProductByMenu.push({index:this.indexMenu,menuId:t,data:[]})},isHas:function(){for(var t=0;this.allProductByMenu.length>t;t++)if(this.allProductByMenu[t].menuId==this.clickMenuID)return!0},pushData:function(t){for(var e=0;this.allProductByMenu.length>e;e++)if(this.allProductByMenu[e].menuId==this.clickMenuID)for(var n=e;t.length>n;n++)this.allProductByMenu[e].data.push(t[n])},navByMenu:function(t,e){if(this.indexMenu=t,this.clickMenuID=e,this.isHas())for(var n=0;this.allProductByMenu.length>n;n++)this.allProductByMenu[n].menuId==this.clickMenuID&&(this.productByMenu=this.allProductByMenu[n].data);else this.intDataForMenu(e),this.getMainProduct(e)},onClick:function(e){"首页"==e.content.text&&t.switchTab({url:"/pages/index/index"}),"购物车"==e.content.text&&t.switchTab({url:"/pages/cart/cart"})},addCartByMenu:function(e){var n=this;return p(r.default.mark((function o(){var a;return r.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,n.$myrequest({url:"/product",data:{id:e.id}});case 2:a=r.sent,u.default.add(a,1),n.cartCount=u.default.readCartCountByStorageSync(),t.showToast({title:"添加购物车成功"});case 6:case"end":return r.stop()}}),o)})))()},buttonClick:function(e){"加入购物车"==e.content.text&&(u.default.add(this.productOne,1),this.cartCount=u.default.readCartCountByStorageSync(),t.showToast({title:"添加购物车成功"})),"立即购买"==e.content.text&&t.navigateTo({url:"/pages/order/order-pay?from=good&product_id="+this.id+"&account="+this.productOne.price})},getProductOne:function(t,e){var n=this;return p(r.default.mark((function u(){var o;return r.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,n.$myrequest({url:"/product",data:{id:t}});case 2:o=r.sent,n.productOne=o,e&&e();case 5:case"end":return r.stop()}}),u)})))()},getProductList:function(t){var e=this;return p(r.default.mark((function n(){var u;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$myrequest({url:"/product/by_category",data:{page:1,categoryID:e.categoryID}});case 2:u=n.sent,u.data.length>0&&(e.productList=[].concat(i(e.productList),i(u.data))),t&&t();case 5:case"end":return n.stop()}}),n)})))()},getReviews:function(t){var e=this;return p(r.default.mark((function n(){var u;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$myrequest({url:"/reviews",data:{id:e.id}});case 2:u=n.sent,1!=Object.keys(u).length&&(e.reviewsData=u.reviews[0]),t&&t();case 5:case"end":return n.stop()}}),n)})))()},getMenu:function(t){var e=this;return p(r.default.mark((function n(){var u;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$myrequest({url:"/product_menu",data:{id:e.id}});case 2:u=n.sent,u[0].menu.length>0&&(e.menuTitle=u[0].menu,e.menuTitle.length>0&&(e.showMenu=!0,0==e.clickMenuID&&(e.clickMenuID=e.menuTitle[0].menu_id,e.intDataForMenu(e.menuTitle[0].menu_id),e.getMainProduct(e.menuTitle[0].menu_id)))),t&&t();case 5:case"end":return n.stop()}}),n)})))()},getMainProduct:function(t){var e=this;return p(r.default.mark((function n(){var u,o,a,i;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return[],e.allProductByMenuPrice=0,n.next=4,e.$myrequest({url:"/menu/main_info",data:{id:t}});case 4:if(u=n.sent,u.length>0)for(o=u[0].menu_find_product,a=0;o.length>a;a++)if(e.id!=o[a].product_id)for(e.allProductByMenuPrice+=100*o[a].product_one.price,i=0;e.allProductByMenu.length>i;i++)e.allProductByMenu[i].menuId==e.clickMenuID&&(e.allProductByMenu[i].data.push(o[a].product_one),e.productByMenu=e.allProductByMenu[i].data);case 6:case"end":return n.stop()}}),n)})))()},jumpTo:function(e){t.navigateTo({url:"/pages/reviews/reviews-detail?id="+e})}},onLoad:function(e){this.id=e.id,this.categoryID=e.category_id,this.getMenu();var n=t.getStorageSync(o.default.storageKeyForCart);this.cartCount=n.length,this.getProductOne(e.id),this.getProductList(),this.getReviews()}};e.default=w}).call(this,n("543d")["default"])},d88a:function(t,e,n){"use strict";var r=n("f3bd"),u=n.n(r);u.a},db16:function(t,e,n){"use strict";n.r(e);var r=n("f902"),u=n("4a53");for(var o in u)"default"!==o&&function(t){n.d(e,t,(function(){return u[t]}))}(o);n("d88a");var a,i=n("f0c5"),c=Object(i["a"])(u["default"],r["b"],r["c"],!1,null,null,null,!1,r["a"],a);e["default"]=c.exports},f3bd:function(t,e,n){},f902:function(t,e,n){"use strict";n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return r}));var r={uniRate:function(){return n.e("components/uni-rate/uni-rate").then(n.bind(null,"35b4"))},uniGoodsNav:function(){return n.e("components/uni-goods-nav/uni-goods-nav").then(n.bind(null,"87b1"))}},u=function(){var t=this,e=t.$createElement;t._self._c},o=[]}},[["7a98","common/runtime","common/vendor"]]]);